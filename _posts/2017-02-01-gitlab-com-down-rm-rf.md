---
title: Gitlab.com 误删数据，备份恢复失败已宕机 10 小时
date: 2017-02-01  20:00
updated: 2017-02-01 20:00
tags: gitlab
---

`人类至今无法完全规避瞬间脑抽留下的后果`

GitLab.com 官方网站发布声明称由于其产品数据库问题导致的网站无法正常访问。据国外媒体报道称 Gitlab 网站疲惫的系统管理员深夜在进行数据库维护时，使用 rm -rf 删了300GB 生产环境数据。等到清醒过来紧急按下ctrl + c，只有4.5GB保留下来。然后恢复备份失败，网站已经宕了10个小时，现在还没恢复。


![20170202148596557179587.png](http://ok73hb95u.bkt.clouddn.com/20170202148596557179587.png)

gtlab 的数据备份是无效的。报告称此次数据丢失并非仓库的数据，而是仓库相关的 issue 以及合并请求操作。

GitLab.com 号称有五重备份机制：常规备份（24小时做一次）、自动同步、LVM快照（24小时做一次）、Azure备份（只对 NFS 启用，对数据库无效）、S3备份。这次事故发生时，所有备份全部无效！为了纪念这个事件，已经有人提议，将2月1日定为“世界备份日”


来源: https://www.oschina.net/news/81473/gitlab-com-down
